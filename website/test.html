<!DOCTYPE html>
<html lang="en" class="no-js">
    <!-- Head -->
    <head>
        <title>Data Driven Sailing | Sailor Directory</title>

        <!-- Meta -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <!-- Favicon -->
        <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon">

        <!-- Social tags -->
        <meta name="keywords" content="Sailing, College Sailing, Sailor Directory, Rankings, Sailors">
        <meta name="description" content="Sailor Directory: A searchable list of sailors and their details.">
        <meta name="author" content="Data Driven Sailing">

        <!-- Schema.org -->
        <meta itemprop="name" content="Data Driven Sailing">
        <meta itemprop="description" content="Sailor Directory and Rankings">
        <meta itemprop="image" content="/assets/img/logo.png">

        <!-- Twitter Card -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@DataDrivenSailing">
        <meta name="twitter:title" content="Data Driven Sailing | Sailor Directory">
        <meta name="twitter:description" content="Search and view sailor details in the directory">
        <meta name="twitter:creator" content="@DataDrivenSailing">
        <meta name="twitter:image" content="/assets/img/logo.png">

        <!-- Open Graph -->
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="Data Driven Sailing">
        <meta property="og:title" content="Sailor Directory">
        <meta property="og:description" content="Search for sailors and their data">
        <meta property="og:url" content="https://datadrivensailing.com">
        <meta property="og:image" content="https://datadrivensailing.com/assets/img/logo.png">
        <meta property="og:image:secure_url" content="https://datadrivensailing.com/assets/img/logo.png">

        <!-- Web Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">

        <!-- Vendor Styles -->
        <link rel="stylesheet" href="/assets/vendor/themify-icons/themify-icons.css">
        <link rel="stylesheet" href="/assets/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css">

        <!-- Theme Styles -->
        <link rel="stylesheet" href="/assets/css/theme.css">

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-XXXX');</script>
        <!-- End Google Tag Manager -->

    </head>
    <!-- End Head -->

    <!-- Body -->
    <body>
        <header class="u-header">
            <div class="u-header-left">
                <a class="u-header-logo" href="/">
                    <img class="u-header-logo__icon" src="/assets/img/logo-icon.png" alt="Data Driven Sailing Icon" style="max-width: 50px;">
                    <img class="u-header-logo__text" src="/assets/img/logo-text.png" alt="Data Driven Sailing Logo">
                </a>
            </div>

            <div class="u-header-middle">
                <div class="u-header-section">
                    <a class="js-sidebar-invoker u-header-invoker u-sidebar-invoker" href="#" data-target="#sidebar">
                        <span class="ti-align-left u-header-invoker__icon u-sidebar-invoker__icon--open"></span>
                        <span class="ti-align-justify u-header-invoker__icon u-sidebar-invoker__icon--close"></span>
                    </a>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside id="sidebar" class="u-sidebar">
            <div class="u-sidebar-inner">
                <header class="u-sidebar-header">
                    <a class="u-sidebar-logo" href="/">
                        <img class="u-sidebar-logo__icon" src="/assets/img/logo-icon.png" alt="Data Driven Sailing Icon" style="max-width: 50px;">
                        <img class="u-sidebar-logo__text" src="/assets/img/logo-text.png" alt="Data Driven Sailing Logo">
                    </a>
                </header>

                <nav class="u-sidebar-nav">
                    <ul class="u-sidebar-nav-menu">
                        <li class="u-sidebar-nav-menu__item">
                            <a class="u-sidebar-nav-menu__link" href="/">
                                <span class="ti-dashboard u-sidebar-nav-menu__item-icon"></span>
                                <span class="u-sidebar-nav-menu__item-title">Home</span>
                            </a>
                        </li>
                        <li class="u-sidebar-nav-menu__item">
                            <a class="u-sidebar-nav-menu__link" href="/rankings">
                                <span class="ti-star u-sidebar-nav-menu__item-icon"></span>
                                <span class="u-sidebar-nav-menu__item-title">Rankings</span>
                            </a>
                        </li>
                        <li class="u-sidebar-nav-menu__item">
                            <a class="u-sidebar-nav-menu__link" href="/statistics">
                                <span class="ti-stats-up u-sidebar-nav-menu__item-icon"></span>
                                <span class="u-sidebar-nav-menu__item-title">Statistics</span>
                            </a>
                        </li>
                        <li class="u-sidebar-nav-menu__item">
                            <a class="u-sidebar-nav-menu__link" href="/sailors">
                                <span class="ti-user u-sidebar-nav-menu__item-icon"></span>
                                <span class="u-sidebar-nav-menu__item-title">Sailors</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="u-main">
            <div class="u-content">
                <div class="u-body">
                    <div class="row">
                        <div class="col">
                            <div class="card">
                                <div class="card-body">
                                    <h1>Current Sailors Directory</h1>
                                    <p><i>Search sailors by name below.</i></p>
                                    <form>
                                        <div class="form-group">
                                            <input class="form-control" type="text" id="sailorsSearchBar" placeholder="Search For Sailors...">
                                        </div>
                                    </form>
                                    <div class="table-responsive table-striped">
                                        <table class="table table-hover mb-0" id="sailorsTable">
                                            <thead>
                                                <tr>
                                                    <th class="font-weight-bold">Name</th>
                                                    <th class="font-weight-bold">School</th>
                                                    <th class="font-weight-bold">Class</th>
                                                </tr>
                                            </thead>
                                            <tbody id="sailorLinks">
                                                <!-- Sailors List will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <!-- End Main Content -->

        <script>
            let sailorData = [];

            // Function to fetch and display sailor links
            async function loadRedirectData() {
                try {
                    const response = await fetch('name_to_website.csv');
                    const data = await response.text();
                    const rows = data.split('\n').slice(1);  // Skip header row

                    const sailorLinksContainer = document.querySelector('#sailorLinks');
                    sailorData = [];

                    rows.forEach(row => {
                        const [name, school, url] = row.split(',');
                        if (name && school && url) {
                            sailorData.push({ name: name.trim(), school: school.trim(), url: url.trim() });

                            const rowElement = document.createElement('tr');
                            rowElement.innerHTML = `
                                <td><a href="sailor-info.html?name=${name.trim()}">${name.trim()}</a></td>
                                <td>${school.trim()}</td>
                                <td>${url.trim()}</td>
                            `;
                            sailorLinksContainer.appendChild(rowElement);
                        }
                    });

                } catch (error) {
                    console.error('Error loading sailor data:', error);
                }
            }

            // Function to filter sailor list based on search input
            document.querySelector('#sailorsSearchBar').addEventListener('input', function() {
                const searchQuery = this.value.toLowerCase();
                const filteredSailors = sailorData.filter(sailor => sailor.name.toLowerCase().includes(searchQuery));

                const sailorLinksContainer = document.querySelector('#sailorLinks');
                sailorLinksContainer.innerHTML = '';

                filteredSailors.forEach(sailor => {
                    const rowElement = document.createElement('tr');
                    rowElement.innerHTML = `
                        <td><a href="sailor-info.html?name=${sailor.name}">${sailor.name}</a></td>
                        <td>${sailor.school}</td>
                        <td>${sailor.url}</td>
                    `;
                    sailorLinksContainer.appendChild(rowElement);
                });
            });

            loadRedirectData();
        </script>
    </body>
</html>